{
    "collab_server" : "",
    "contents" : "library(raster)\n\nlatlong <- \"+init=epsg:4326\"\nukgrid <- \"+init=epsg:27700\"\n\n\n# Load presence data\nWFD.pres <- read.csv(\"FW_presdata.csv\")\nplot(WFD.pres$Long, WFD.pres$Lat)\n\n## Add 'presence' column\nWFD.pres$pres <- 1\n\n## Create spatial object for presence points\nWFD.pres.latlong <- SpatialPointsDataFrame(data.frame(WFD.pres$Long, WFD.pres$Lat), data = WFD.pres, proj4string = CRS(latlong))\n\n## Convert to BNG\nWFD.pres.BNG <-  spTransform(WFD.pres.latlong,  CRS(ukgrid))\n## Add trasnsformed x and y values to data frame\nWFD.pres.BNG@data$x <- WFD.pres.BNG@coords[,1]\nWFD.pres.BNG@data$y <- WFD.pres.BNG@coords[,2]\n\n\n# Create habitat rasters\n## Define extent\n#fenn.ext <- extent(c(348000, 350000, 335000, 337000)) ## Previous extent needs correcting\nfenn.ext <- extent(c(347890, 349890, 335000, 337000)) ## Corrected visually using Google maps\n\nmoss <- raster(as.matrix(read.csv(\"FW_hab/Fenns_Moss.csv\", header = FALSE)), crs = crs(ukgrid))\nextent(moss) <- fenn.ext               \nwriteRaster(moss, \"FW_hab/Fenns_moss.img\", overwrite = TRUE)\n\nscrub <- raster(as.matrix(read.csv(\"FW_hab/Fenns_Scrub.csv\", header = FALSE)), crs = crs(ukgrid))\nextent(scrub) <- fenn.ext               \nwriteRaster(scrub, \"FW_hab/Fenns_scrub.img\", overwrite = TRUE)\n\nscrubMoss <- raster(as.matrix(read.csv(\"FW_hab/Fenns_ScrubMoss.csv\", header = FALSE)), crs = crs(ukgrid))\nextent(scrubMoss) <- fenn.ext               \nwriteRaster(scrubMoss, \"FW_hab/Fenns_scrubmoss.img\", overwrite = TRUE)\n\nwater <- raster(as.matrix(read.csv(\"FW_hab/Fenns_Water.csv\", header = FALSE)), crs = crs(ukgrid)) ## Water matrix corrected visually using aerial photographs (Google maps)\nextent(water) <- fenn.ext               \nwriteRaster(water, \"FW_hab/Fenns_water.img\", overwrite = TRUE)\n\nwood <- raster(as.matrix(read.csv(\"FW_hab/Fenns_Wood.csv\", header = FALSE)), crs = crs(ukgrid))\nextent(wood) <- fenn.ext               \nwriteRaster(wood, \"FW_hab/Fenns_wood.img\", overwrite = TRUE)\n\n### Split WFD data by visit\n### Will create matrix of presence then edit by hand to include absences (0s) along transect lines\nWFD.pres.v1 <- WFD.pres[WFD.pres.BNG@data$Date == \"16/05/2017\",] \nWFD.pres.v1 <- SpatialPointsDataFrame(data.frame(WFD.pres.v1$E, WFD.pres.v1$N), data = WFD.pres.v1, proj4string = CRS(ukgrid))\nWFD.pres.v2 <- WFD.pres[WFD.pres.BNG@data$Date == \"22/05/2017\",]\nWFD.pres.v2 <- SpatialPointsDataFrame(data.frame(WFD.pres.v2$E, WFD.pres.v2$N), data = WFD.pres.v2, proj4string = CRS(ukgrid))\nWFD.pres.v3 <- WFD.pres[WFD.pres.BNG@data$Date == \"25/05/2017\",]\nWFD.pres.v3 <- SpatialPointsDataFrame(data.frame(WFD.pres.v3$E, WFD.pres.v3$N), data = WFD.pres.v3, proj4string = CRS(ukgrid))\nWFD.pres.v4 <- WFD.pres[WFD.pres.BNG@data$Date == \"30/05/2017\",]\nWFD.pres.v4 <- SpatialPointsDataFrame(data.frame(WFD.pres.v4$E, WFD.pres.v4$N), data = WFD.pres.v4, proj4string = CRS(ukgrid))\nWFD.pres.v5 <- WFD.pres[WFD.pres.BNG@data$Date == \"01/06/2017\",]\nWFD.pres.v5 <- SpatialPointsDataFrame(data.frame(WFD.pres.v5$E, WFD.pres.v5$N), data = WFD.pres.v5, proj4string = CRS(ukgrid))\nWFD.pres.v6 <- WFD.pres[WFD.pres.BNG@data$Date == \"07/06/2017\",]\nWFD.pres.v6 <- SpatialPointsDataFrame(data.frame(WFD.pres.v6$E, WFD.pres.v6$N), data = WFD.pres.v6, proj4string = CRS(ukgrid))\nWFD.pres.v7 <- WFD.pres[WFD.pres.BNG@data$Date == \"09/06/2017\",]\nWFD.pres.v7 <- SpatialPointsDataFrame(data.frame(WFD.pres.v7$E, WFD.pres.v7$N), data = WFD.pres.v7, proj4string = CRS(ukgrid))\nWFD.pres.v8 <- WFD.pres[WFD.pres.BNG@data$Date == \"13/06/2017\",]\nWFD.pres.v8 <- SpatialPointsDataFrame(data.frame(WFD.pres.v8$E, WFD.pres.v8$N), data = WFD.pres.v8, proj4string = CRS(ukgrid))\nWFD.pres.v9 <- WFD.pres[WFD.pres.BNG@data$Date == \"19/06/2017\",]\nWFD.pres.v9 <- SpatialPointsDataFrame(data.frame(WFD.pres.v9$E, WFD.pres.v9$N), data = WFD.pres.v9, proj4string = CRS(ukgrid))\nWFD.pres.v10 <- WFD.pres[WFD.pres.BNG@data$Date == \"23/06/2017\",]\nWFD.pres.v10 <- SpatialPointsDataFrame(data.frame(WFD.pres.v10$E, WFD.pres.v10$N), data = WFD.pres.v10, proj4string = CRS(ukgrid))\nWFD.pres.v11 <- WFD.pres[WFD.pres.BNG@data$Date == \"26/06/2017\",]\nWFD.pres.v11 <- SpatialPointsDataFrame(data.frame(WFD.pres.v11$E, WFD.pres.v11$N), data = WFD.pres.v11, proj4string = CRS(ukgrid))\nWFD.pres.v12 <- WFD.pres[WFD.pres.BNG@data$Date == \"04/07/2017\",]\nWFD.pres.v12 <- SpatialPointsDataFrame(data.frame(WFD.pres.v12$E, WFD.pres.v12$N), data = WFD.pres.v12, proj4string = CRS(ukgrid))\nWFD.pres.v13 <- WFD.pres[WFD.pres.BNG@data$Date == \"07/07/2017\",]\nWFD.pres.v13 <- SpatialPointsDataFrame(data.frame(WFD.pres.v13$E, WFD.pres.v13$N), data = WFD.pres.v13, proj4string = CRS(ukgrid))\n\nWFD.occ.v1 <- rasterize(WFD.pres.v1, water, \"pres\")\nWFD.occ.v2 <- rasterize(WFD.pres.v2, water, \"pres\")\nWFD.occ.v3 <- rasterize(WFD.pres.v3, water, \"pres\")\nWFD.occ.v4 <- rasterize(WFD.pres.v4, water, \"pres\")\nWFD.occ.v5 <- rasterize(WFD.pres.v5, water, \"pres\")\nWFD.occ.v6 <- rasterize(WFD.pres.v6, water, \"pres\")\nWFD.occ.v7 <- rasterize(WFD.pres.v7, water, \"pres\")\nWFD.occ.v8 <- rasterize(WFD.pres.v8, water, \"pres\")\nWFD.occ.v9 <- rasterize(WFD.pres.v9, water, \"pres\")\nWFD.occ.v10 <- rasterize(WFD.pres.v10, water, \"pres\")\nWFD.occ.v11 <- rasterize(WFD.pres.v11, water, \"pres\")\nWFD.occ.v12 <- rasterize(WFD.pres.v12, water, \"pres\")\nWFD.occ.v13 <- rasterize(WFD.pres.v13, water, \"pres\")\n\n### Write rasters \nwriteRaster(WFD.occ.v1, \"FW_hab/occ_mat/WFD.occ.v1.asc\")\nwriteRaster(WFD.occ.v2, \"FW_hab/occ_mat/WFD.occ.v2.asc\")\nwriteRaster(WFD.occ.v3, \"FW_hab/occ_mat/WFD.occ.v3.asc\")\nwriteRaster(WFD.occ.v5, \"FW_hab/occ_mat/WFD.occ.v5.asc\")\nwriteRaster(WFD.occ.v6, \"FW_hab/occ_mat/WFD.occ.v6.asc\")\nwriteRaster(WFD.occ.v7, \"FW_hab/occ_mat/WFD.occ.v7.asc\")\nwriteRaster(WFD.occ.v8, \"FW_hab/occ_mat/WFD.occ.v8.asc\")\nwriteRaster(WFD.occ.v9, \"FW_hab/occ_mat/WFD.occ.v9.asc\")\nwriteRaster(WFD.occ.v10, \"FW_hab/occ_mat/WFD.occ.v10.asc\")\nwriteRaster(WFD.occ.v11, \"FW_hab/occ_mat/WFD.occ.v11.asc\")\nwriteRaster(WFD.occ.v12, \"FW_hab/occ_mat/WFD.occ.v12.asc\")\nwriteRaster(WFD.occ.v13, \"FW_hab/occ_mat/WFD.occ.v13.asc\")\n\n## Rasters are edited by hand to include absence values along transects\n## Transects were standard routes and are implied by presence points",
    "created" : 1520290328762.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1562238653",
    "id" : "3863BCDE",
    "lastKnownWriteTime" : 1520370649,
    "last_content_update" : 1520370649413,
    "path" : "~/Dropbox/Research/Dragonfly/White-faced Darter/WFDDelamere/WFDDelamere_Analysis/FW_Pres_analysis.R",
    "project_path" : "FW_Pres_analysis.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}